{"version":3,"file":"BuilderCv.umd.min.800.js","mappings":"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","sources":["webpack://BuilderCv/./src/formulaires/EtapeDynamiqueSection.vue","webpack://BuilderCv/src/formulaires/EtapeDynamiqueSection.vue","webpack://BuilderCv/./src/formulaires/EtapeDynamiqueSection.vue?a01e","webpack://BuilderCv/./src/formulaires/EtapeDynamiqueSection.vue?36cd"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('ContainerPage',{scopedSlots:_vm._u([{key:\"entete\",fn:function(){return [_c('hbk-button',{on:{\"click\":_vm.openModal}},[_vm._v(\" Conseils \")])]},proxy:true},{key:\"app-footer\",fn:function(){return [_c('div',{staticClass:\"w-100 d-flex justify-content-between\"},[_c('router-link',{attrs:{\"to\":_vm.previewStep}},[_c('hbk-button',{staticClass:\"mr-4 text-muted\",attrs:{\"icon\":\"arrow-left\",\"variant\":\"outline-light\",\"icon-variant\":\"\"}},[_vm._v(\" Etape precedente \")])],1),_c('router-link',{attrs:{\"to\":_vm.nextStep}},[_c('hbk-button',{attrs:{\"icon\":\"save\",\"variant\":\"outline-info\",\"icon-variant\":\"\"},on:{\"click\":function($event){return _vm.$store.dispatch('storeForm/updateLocalStorage')}}},[_vm._v(\" Etape suivante \")])],1)],1)]},proxy:true}])},[_c('HCardIcon',{attrs:{\"icon\":\"exclamation-lg\"},scopedSlots:_vm._u([{key:\"titre\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.headerBlock.title)+\" \")]},proxy:true}])},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.headerBlock.text)}})]),_vm._l((_vm.buildFields()),function(render,k){return _c(render.template,{key:k,tag:\"component\",attrs:{\"field\":render.field,\"model\":render.model,\"class-css\":['mb-5'],\"namespace-store\":\"storeForm\"},on:{\"addNewValue\":function($event){return _vm.addNewValue($event, render)},\"removeField\":function($event){return _vm.removeField($event, render)},\"array_move\":function($event){return _vm.array_move($event, render)}}})})],2),_c('modalForm',{attrs:{\"title-modal\":_vm.titleModal,\"manage-modal\":_vm.manageModal},on:{\"closeModal\":_vm.closeModal},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('HCardIcon',{attrs:{\"with-mb\":false}})]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <ContainerPage>\n      <template #entete>\n        <hbk-button @click=\"openModal\"> Conseils </hbk-button>\n      </template>\n      <HCardIcon icon=\"exclamation-lg\">\n        <template #titre> {{ headerBlock.title }} </template>\n        <div v-html=\"headerBlock.text\"></div>\n      </HCardIcon>\n      <component\n        :is=\"render.template\"\n        v-for=\"(render, k) in buildFields()\"\n        :key=\"k\"\n        :field=\"render.field\"\n        :model=\"render.model\"\n        :class-css=\"['mb-5']\"\n        namespace-store=\"storeForm\"\n        @addNewValue=\"addNewValue($event, render)\"\n        @removeField=\"removeField($event, render)\"\n        @array_move=\"array_move($event, render)\"\n      ></component>\n      <template #app-footer>\n        <div class=\"w-100 d-flex justify-content-between\">\n          <router-link :to=\"previewStep\">\n            <hbk-button\n              icon=\"arrow-left\"\n              variant=\"outline-light\"\n              icon-variant=\"\"\n              class=\"mr-4 text-muted\"\n            >\n              Etape precedente\n            </hbk-button>\n          </router-link>\n          <router-link :to=\"nextStep\">\n            <hbk-button\n              icon=\"save\"\n              variant=\"outline-info\"\n              icon-variant=\"\"\n              @click=\"$store.dispatch('storeForm/updateLocalStorage')\"\n            >\n              Etape suivante\n            </hbk-button>\n          </router-link>\n        </div>\n      </template>\n    </ContainerPage>\n    <modalForm\n      :title-modal=\"titleModal\"\n      :manage-modal=\"manageModal\"\n      @closeModal=\"closeModal\"\n    >\n      <template #header>\n        <HCardIcon :with-mb=\"false\"></HCardIcon>\n      </template>\n    </modalForm>\n  </div>\n</template>\n\n<script>\nimport modalForm from \"./modalForm.vue\";\nimport { mapState, mapGetters } from \"vuex\";\nimport loadField from \"components_h_vuejs/src/components/fieldsDrupal/loadField\";\nimport request from \"../request\";\nexport default {\n  name: \"EtapeDynamiqueSection\",\n  components: {\n    modalForm,\n  },\n  props: {\n    keySections: {\n      type: String,\n      default: \"\",\n    },\n    idEtape: {\n      type: String,\n      default: \"0\",\n    },\n  },\n  data() {\n    return {\n      titleModal: \"\",\n      manageModal: false,\n    };\n  },\n  computed: {\n    ...mapState(\"storeForm\", {\n      layout_paragraphs: (state) => state.layout_paragraphs,\n      user: (state) => state.user,\n    }),\n    ...mapGetters([\"etapes\", \"modelDynamique\"]),\n    nextStep() {\n      const idEtape = parseInt(this.idEtape) + 1;\n      const length = this.etapes.length;\n      if (idEtape < length) {\n        if (length) {\n          return \"/layouts-sections/\" + this.etapes[idEtape] + \"/\" + idEtape;\n        } else return \"/login\";\n      } else {\n        if (this.user && this.user.uid) return \"/save-cv\";\n        else return \"/login\";\n      }\n    },\n    previewStep() {\n      const idEtape = parseInt(this.idEtape) - 1;\n      if (idEtape >= 0) {\n        return \"/layouts-sections/\" + this.etapes[idEtape] + \"/\" + idEtape;\n      } else return \"/formation\";\n    },\n    form() {\n      if (this.keySections) {\n        const fr = this.layout_paragraphs[this.keySections].form;\n        return fr;\n      } else return {};\n    },\n    form_sort() {\n      if (this.keySections) {\n        const fr = this.layout_paragraphs[this.keySections].form_sort;\n        return fr;\n      } else return {};\n    },\n    model() {\n      if (\n        this.keySections &&\n        this.layout_paragraphs[this.keySections] &&\n        this.layout_paragraphs[this.keySections].model\n      ) {\n        const md = this.layout_paragraphs[this.keySections].model;\n        return md;\n      } else return {};\n    },\n    headerBlock() {\n      const datas = { title: \"\", text: \"\" };\n      switch (this.keySections) {\n        case \"competences_et_langues_cv_\":\n          datas.title = \"Compétences et langues\";\n          datas.text =\n            \"<p> Les compétences que vous ajoutez devraient correspondre aux prérequis du poste auquel vous postulez. </p> <p>Vous pouvez remplir la section langue si vous parlez plus d'une langue.</p> \";\n          break;\n        case \"loisir_cv_\":\n          datas.title = \"Centres d'intérêt ou Loisirs\";\n          datas.text =\n            \"<p> Demandez-vous si l’activité que vous pratiquez vous donne une bonne image, si ce hobby peut vous distinguer des autres candidats et si c’est une passion dont vous pourrez parler avec enthousiasme lors de l’entretien. Evitez les platitudes, les clichés et les lieux communs. </p>\";\n          break;\n        default:\n          break;\n      }\n      return datas;\n    },\n  },\n  mounted() {\n    //\n  },\n  methods: {\n    buildFields() {\n      const fields = [];\n      loadField.getConfig(request);\n      if (this.form_sort)\n        this.form_sort.forEach((field) => {\n          fields.push({\n            template: loadField.getField(field),\n            field: field,\n            model: this.model,\n          });\n        });\n      return fields;\n    },\n    buildFieldsOld() {\n      const fields = [];\n      loadField.getConfig(request);\n      for (const i in this.form) {\n        fields.push({\n          template: loadField.getField(this.form[i]),\n          field: this.form[i],\n          model: this.model,\n        });\n      }\n      return fields;\n    },\n    /**\n     * --//\n     */\n    openModal() {\n      if (this.manageModal) this.manageModal = false;\n      else this.manageModal = true;\n    },\n    closeModal() {\n      this.manageModal = false;\n    },\n    addNewValue(value, render) {\n      //console.log(\"addNewValue : \", render, \"\\n\", value);\n      const vals =\n        this.layout_paragraphs[this.keySections].model[render.field.name];\n      // Specifiquement à cette environnement, on ne peut pas mettre à jour le computed, this.model\n      // On met à jour directement, la donnée present dans le layout.\n      vals.push(value);\n      this.$store.dispatch(\"storeForm/setValue\", {\n        value: vals,\n        fieldName: render.field.name,\n      });\n    },\n    removeField(index, render) {\n      this.model[render.field.name].splice(index, 1);\n    },\n    array_move(evt, render) {\n      console.log(\" Evt : \", evt, \"\\n Render : \", render);\n      //if (evt.oldIndex == null || evt.newIndex == null) return;\n      const moveItem = (arr, fromIndex, toIndex) => {\n        let itemRemoved = arr.splice(fromIndex, 1); // assign the removed item as an array\n        arr.splice(toIndex, 0, itemRemoved[0]); // insert itemRemoved into the target index\n        return arr;\n      };\n      const vals = moveItem(\n        this.model[render.field.name],\n        evt.oldIndex,\n        evt.newIndex\n      );\n      this.$store.dispatch(\"storeForm/setValue\", {\n        value: vals,\n        fieldName: render.field.name,\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EtapeDynamiqueSection.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-124.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./EtapeDynamiqueSection.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EtapeDynamiqueSection.vue?vue&type=template&id=41e62f44&\"\nimport script from \"./EtapeDynamiqueSection.vue?vue&type=script&lang=js&\"\nexport * from \"./EtapeDynamiqueSection.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","scopedSlots","_u","key","fn","on","openModal","_v","proxy","staticClass","attrs","previewStep","nextStep","$event","$store","dispatch","_s","headerBlock","title","domProps","text","_l","buildFields","k","template","tag","field","model","addNewValue","removeField","array_move","titleModal","manageModal","closeModal","staticRenderFns","name","components","modalForm","props","keySections","type","default","idEtape","data","computed","layout_paragraphs","user","form","form_sort","datas","mounted","methods","loadField","fields","buildFieldsOld","vals","value","fieldName","console","arr","evt","component"],"sourceRoot":""}