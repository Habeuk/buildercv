"use strict";(("undefined"!==typeof self?self:this)["webpackChunkBuilderCv"]=("undefined"!==typeof self?self:this)["webpackChunkBuilderCv"]||[]).push([[450],{2450:function(e,t,i){i.r(t),i.d(t,{default:function(){return f}});var s=function(){var e=this,t=e._self._c;return t("ValidationProvider",{attrs:{name:e.fullname,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(i){return[t("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},[t("div",{staticClass:"autocomplete"},[t("multiselect",{attrs:{options:e.options,"custom-label":e.nameWithLang,placeholder:"",label:"text","track-by":"text","show-no-results":!0,"show-labels":!1,loading:e.isLoading,multiple:e.cardinality,"allow-empty":!0},on:{"search-change":e.asyncFind},model:{value:e.value_computed,callback:function(t){e.value_computed=t},expression:"value_computed"}},[t("template",{slot:"noResult"},[t("span",{staticClass:"option__title"},[e._v(" Aucun contenu ne correspond à votre recherche ")])]),t("template",{slot:"placeholder"},[t("span",{staticClass:"option__title"},[e._v(" Aucun contenu ... ")])]),t("template",{slot:"noOptions"},[t("span",{staticClass:"option__title"},[e._v(" Saisir un ou plusieurs caractères ... ")])])],2),t("div",{staticClass:"text-danger"},e._l(i.errors,(function(i,s){return t("small",{key:s,staticClass:"d-block"},[e._v(" "+e._s(i)+" ")])})),0)],1)])]}}])})},l=[],a=(i(6352),i(9069)),n=i(8309),o=i.n(n),r=i(7605),u=i(4977),d={name:"MultiSelectTaxo",components:{ValidationProvider:a.d_,Multiselect:o()},props:{field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0},parentName:{type:String,required:!0}},data(){return{isLoading:!1,options:[],value_select:null}},computed:{fullname(){return this.parentName+this.field.name},cardinality(){return-1===this.field.cardinality},value_computed:{get(){return this.value_select},set(e){this.updateValue(e)}}},mounted(){this.loadDefaults()},methods:{getTermByTid(e){this.isLoading=!0;let t=this.getFistVocab();const i=new r.Z(t);i.getValueByTid(e).then((()=>{const e=i.getOptions();this.options=e,this.cardinality?this.value_select=e:e[0]&&(this.value_select=e[0]),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},loadDefaults(){this.model[this.field.name].forEach((e=>{this.getTermByTid(e.target_id)}))},getFistVocab(){if(this.field.definition_settings.handler_settings.target_bundles){const e=Object.keys(this.field.definition_settings.handler_settings.target_bundles);return this.field.definition_settings.handler_settings.target_bundles[e[0]]}return this.field.definition_settings.target_type?this.field.definition_settings.target_type:null},asyncFind(e){if(e.length>=2){let t=this.getFistVocab();const i=new r.Z(t);this.isLoading=!0,i.getSearch(e).then((()=>{this.options=i.getOptions(),this.isLoading=!1}))}},nameWithLang({text:e}){return`${e}`},setValue(e){this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.fullname}):this.$store.dispatch("setValue",{value:e,fieldName:this.fullname})},getRules(){return u.Z.getRules(this.field)},updateValue(e){if(this.value_select=e,this.cardinality){const t=[];e&&e.length&&e.forEach((e=>{t.push({target_id:e.value})})),this.setValue(t)}else{const t=[];e&&e.value&&t.push({target_id:e.value}),this.setValue(t)}}}},c=d,h=i(1001),p=(0,h.Z)(c,s,l,!1,null,null,null),f=p.exports}}]);
//# sourceMappingURL=BuilderCv.umd.min.450.js.map